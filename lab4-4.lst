QAflisp - FLISP Absolute crossassembler, Version 1.0
(c) GMV 1989-2015


File: lab4-4.lst
FC                      1. Inport	EQU	$FC
FB                      2. Utport	EQU	$FB
                        3. 
10                      4. DelayC1	EQU	$10		;Dessa konstanter styr hur lång fördröjning Delay1s orsakar.
01                      5. DelayC2	EQU	$1		;Ändra dem eventuellt i labbet så att fördröjnigen blir rimligt lång.
                        6. 
FF                      7. 	ORG	$FF
FF 20                   8. 	FCB	$20
                        9. 
20                     10. 	ORG	$20
                       11. 
20                     12. Main:
20 34 26               13. 	JSR	ReadAscii
22 34 31               14. 	JSR 	BlinkLight
24 33 20               15. 	JMP 	Main
                       16. 
26                     17. ReadAscii:
26 F1 FC               18. 	LDA	Inport
28 97 00               19. 	CMPA	#$00
2A 24 FA               20. 	BEQ	ReadAscii
2C 90 00               21. 	LDX	#$00
2E 30 FB               22. 	STX	Utport
30 43                  23. 	RTS
31                     24. 	
31                     25. 	
                       26. 
                       27. 
31                     28. 	
31                     29. BlinkLight:
31 E1 FB               30. 	STA	Utport	
33 43                  31. 	RTS
34                     32. 	
                       33. ; Orsakar en fördröjning på ungefär 1s i simulatorn (vid "run fast")
                       34. ; Ändrar inga register
34                     35. Delay1s:
34 10                  36. 	PSHA
35 11                  37. 	PSHX
36 13                  38. 	PSHC
37 90 01               39. 	LDX	#DelayC2
39                     40. Delay1s_loop2:
39 F0 10               41. 	LDA	#DelayC1
3B                     42. Delay1s_loop:
3B 08                  43. 	DECA
3C 25 FD               44. 	BNE	Delay1s_loop
3E CC FF               45. 	LEAX	-1,X
40 9C 00               46. 	CMPX	#0
42 25 F5               47. 	BNE	Delay1s_loop2
44 17                  48. 	PULC
45 15                  49. 	PULX
46 14                  50. 	PULA
47 43                  51. 	RTS
                       52. 
                       53. ; Data - Variabler
48                     54. Count:
48 00                  55. 	RMB	1
                       56. 
                       57. ; Data - Konstanter
49                     58. MorseCode:
49 02 40               59. 	FCB	2,%01000000 ;'A'
4B 04 80               60. 	FCB	4,%10000000 ;'B'
4D 04 A0               61. 	FCB	4,%10100000 ;'C'
4F 03 80               62. 	FCB	3,%10000000 ;'D'
51 01 00               63. 	FCB	1,%00000000 ;'E'
53 04 20               64. 	FCB	4,%00100000 ;'F'
55 03 C0               65. 	FCB	3,%11000000 ;'G'
57 04 00               66. 	FCB	4,%00000000 ;'H'
59 02 00               67. 	FCB	2,%00000000 ;'I'
5B 04 10               68. 	FCB	4,%00010000 ;'J'
5D 03 A0               69. 	FCB	3,%10100000 ;'K'
5F 04 40               70. 	FCB	4,%01000000 ;'L'
61 02 C0               71. 	FCB	2,%11000000 ;'M'
63 02 80               72. 	FCB	2,%10000000 ;'N'
65 03 E0               73. 	FCB	3,%11100000 ;'O'
67 04 60               74. 	FCB	4,%01100000 ;'P'
69 04 D0               75. 	FCB	4,%11010000 ;'Q'
6B 03 40               76. 	FCB	3,%01000000 ;'R'
6D 03 00               77. 	FCB	3,%00000000 ;'S'
6F 01 80               78. 	FCB	1,%10000000 ;'T'
71 03 20               79. 	FCB	3,%00100000 ;'U'
73 04 10               80. 	FCB	4,%00010000 ;'V'
75 03 20               81. 	FCB	3,%00100000 ;'W'
77 04 90               82. 	FCB	4,%10010000 ;'X'
79 04 B0               83. 	FCB	4,%10110000 ;'Y'
7B 04 C0               84. 	FCB	4,%11000000 ;'Z'
7D                     85. 	
7D                     86. 	
7D                     87. 	
7D                     88. 	
7D                     89. 	
7D                     90. 	